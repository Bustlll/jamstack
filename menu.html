<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TXG</title>
    <link rel="icon" type="image/x-icon" href="sshot.ico">
    <link rel="stylesheet" href="style.css">
    <script src="https://js.stripe.com/v3/"></script>
    <script src="localStorage.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20,400,0,0" />    

    
</head>
<body>
  
  
 <!-- Start of navbar space -->
 <nav>
    <input type="checkbox" id="check">
    <label for="check">
        <i class="hidden-menu" id="hmenu">Menu</i>
    </label>
    <a href="/index.html" class="logo">TOXTAT</a>
    <ul>
        <li><a accesskey="a" href="/index.html">Home</a></li>
        <li><a accesskey="q" href="/menu.html">Menu</a></li>

        <div>
          <input accesskey="d" type="checkbox" class="checkbox" id="chk"/>
          <label class="label" for="chk" >
            <i class="material-symbols-outlined" id="night" >clear_night</i>
            <i class="material-symbols-outlined" id="day">flare</i>
              <div class="ball"></div>
          </label>
      </div>
        

    </ul>
</nav>

<!-- End of navbar space -->

   <!-- Start main content space -->
    
   <div class="mainContent">
        
    <section class="one">

    <div class="maincontainer">
       <div class="maincontainer-rank"></div>
       <div class="maincontainer-days"></p>
     </div>   

<section> 
<div class="maincontainer-rankInfo"> 
  
  
  <table class="content-table2" id="content-table2">
    <thead>
      <tr>
        <th class="name">Name</th>
        <th class="instagram">Instagram</th>
        <th class="youtube">Youtube</th>
        <th class="twitch">Twitch</th>
        <th class="reddit">Reddit</th>
        <th class="twitter">Twitter</th>
        <th class="region">REG</th>
     
      </tr>
    </thead>
    <tbody id="cryptocurrencies">
      <tr>
        <td>jahny</td>
        <td>jahnty</td>
        <td>XJohonyX</td>
        <td>jowey</td>
        <td>janred</td>
        <td>socialjon</td>
        <td>JAP</td>
      </tr>
    </tbody>
  </table>

  <ul>
    <p>FOR YOURSELF</p>
    <li>Enter your info and refresh</li>
    <li>Select ammount button below</li>
    <li>Flex in the Toxtat Leaderboard</li>
  </ul> 

  <ul>
    <p>$END CASH</p>
    <li>Enter your friend's table name</li>
    <li>Flip it</li>
    <li>Select amount in the dropdown</li>
  </ul> 
  <ul>
    <p>INFO</p>
    <li>Leaderboards show when there are 10 entries</li>
    <li>Carefull with duplicates</li>
    <li>100 spots avaliable!</li>
  </ul> 
  
 


  
  <div class="check-socials">

     <p id="nameCheck"></p>
     <p id="instagramCheck"></p>
     <p id="youtubeCheck"></p>
     <p id="twitchCheck"></p>
     <p id="redditCheck"></p>
     <p id="twitterCheck"></p>
     <p id="regionCheck"></p>
  </div>
</div>
</section>

</div>
 
<div class="subcontainer"> 
        <section class="socials">Socials</section>
          <div class="flexbox-container">
            <div class="flexbox-item flexbox-item-1">

              <p class="addU">Adding YOU <3 to the table</p>


  

  <form action="#" name="socials" autocomplete="off" id="socialscheck" >
    <div class="form-row">
       <div class="input-data">
          <input type="text" name="name" id="name" placeholder="Name" maxlength="22">
          <div class="underline"></div>
          
       </div>
       

       <div class="input-data">
          <input type="text" name="instagram" id="instagram" placeholder="Instagram" maxlength="10">
          <div class="underline"></div>
       </div>

    </div>
    <div class="form-row">
       <div class="input-data">
          <input type="text" name="youtube" id="youtube" placeholder="Youtube" maxlength="15">
          <div class="underline"></div>
       </div>

       <div class="input-data">
          <input type="text" name="twitch" id="twitch" placeholder="Twitch" maxlength="15">
          <div class="underline"></div>
       </div>
    </div>

     <div class="form-row">
      <div class="input-data">
         <input type="text" name="reddit" id="reddit" placeholder="Reddit" maxlength="15">
         <div class="underline"></div>
      </div>

      <div class="input-data">
         <input type="text" name="twitter" id="twitter" placeholder="Twitter" maxlength="15">
         <div class="underline"></div>
      </div>

   </div>

   <div class="form-row">
      <div class="input-data">
         <input type="text" name="region" id="region" placeholder="Region" maxlength="10">
         <div class="underline"></div>
      </div>
   </div> 
   
   

 </form>  
  <button type="button" class="btn" id="btn">Save</button> 
 

            </div>


            <div class="flexbox-item flexbox-item-2">



              
<div class="addsection">
  <p class="otehrsAdd">Add $ to your friend's table name</p>
 

  <form>
 
    <div class="dropdown">
      <button onclick="addUss()" class="dropbtn" id="cashButt">Flip</button>
      <div class="dropdown-content">
  <form></form>
        <form action="/.netlify/functions/checkout", method ="post">
          <button type="submit" class="btn3" id="1-button" onclick="getDateNow(), {patchuss}, getCashy('cashy', 100)">1$</button>
         </form>
         
         <form action="/.netlify/functions/checkout2">
          <button type="submit" class="btn3" id="2-button" onclick="getDateNow(); getCashy('cashy', 2000)">20$</button>
         </form>
  
         <form action="/.netlify/functions/checkout3">
          <button type="submit" class="btn3" id="3-button" onclick="getDateNow(); getCashy('cashy', 5000)">50$</button>
         </form>
  
         <form action="/.netlify/functions/checkout4">
          <button type="submit" class="btn3" id="4-button" onclick="getDateNow(); getCashy('cashy', 10000)">100$</button>
         </form>
  
         <form action="/.netlify/functions/checkout5">
          <button type="submit" class="btn3" id="5-button" onclick="getDateNow(); getCashy('cashy', 50000)">500$</button>
         </form>
  
         <form action="/.netlify/functions/checkout6">
          <button type="submit" class="btn3" id="6-button" onclick="getDateNow(); getCashy('cashy', 100000)">1k</button>
         </form>
  
         <form action="/.netlify/functions/checkout7">
          <button type="submit" class="btn3" id="7-button" onclick="getDateNow(); getCashy('cashy', 1000000)">10k</button>
         </form>
  
         <form action="/.netlify/functions/checkout8">
          <button type="submit" class="btn3" id="8-button" onclick="getDateNow(); getCashy('cashy', 10000000)">100k</button>
         </form>
     
      </div>
      <input type="text" id="inputCash"placeholder="Name">
      
      <div class="underline"></div>
    </div>

    
    
  
    
    
    </form>
    
   
    
</div>


             
          
            
            </div>

          </div>
           

              

                

  

        <section class="buyrank"> 
          <form action="/.netlify/functions/checkout">
            <button type="submit" class="button" id="1-button" onclick="getDateNow(); getCashy('cashy', 100), addUss()">1$</button>
           </form>

           <form action="/.netlify/functions/checkout2">
            <button type="submit" class="button" id="2-button" onclick="getDateNow(); getCashy('cashy', 2000)">20$</button>
           </form>

           <form action="/.netlify/functions/checkout3">
            <button type="submit" class="button" id="3-button" onclick="getDateNow(); getCashy('cashy', 5000)">50$</button>
           </form>

           <form action="/.netlify/functions/checkout4">
            <button type="submit" class="button" id="4-button" onclick="getDateNow(); getCashy('cashy', 10000)">100$</button>
           </form>

           <form action="/.netlify/functions/checkout5">
            <button type="submit" class="button" id="5-button" onclick="getDateNow(); getCashy('cashy', 50000)">500$</button>
           </form>

           <form action="/.netlify/functions/checkout6">
            <button type="submit" class="button" id="6-button" onclick="getDateNow(); getCashy('cashy', 100000)">1k</button>
           </form>

           <form action="/.netlify/functions/checkout7">
            <button type="submit" class="button" id="7-button" onclick="getDateNow(); getCashy('cashy', 1000000)">10k</button>
           </form>

           <form action="/.netlify/functions/checkout8">
            <button type="submit" class="button" id="8-button" onclick="getDateNow(); getCashy('cashy', 10000000)">100k</button>
           </form>
  
         </section>
      
       

    </div>

          
           
</section>
</div>
<script type="text/javascript">

//dark mode switch
const chk = document.getElementById('chk');
            chk.addEventListener('change', () => {
	        document.body.classList.toggle('white');        
            });
            function reloader(){
  location.reload();
}
     

            function myFunction() {
  var table = document.getElementById("content-table2");
  var row = table.insertRow(-1);
  var cell1 = row.insertCell(-1);
  var cell2 = row.insertCell(-1);
  var cell3 = row.insertCell(-1);
  var cell4 = row.insertCell(-1);
  var cell5 = row.insertCell(-1);
  var cell6 = row.insertCell(-1);
  var cell7 = row.insertCell(-1);
  cell1.innerHTML = JSON.parse(localStorage.getItem('User'))[0].name;
  cell2.innerHTML = JSON.parse(localStorage.getItem('User'))[0].instagram;
  cell3.innerHTML = JSON.parse(localStorage.getItem('User'))[0].youtube;
  cell4.innerHTML = JSON.parse(localStorage.getItem('User'))[0].twitch;
  cell5.innerHTML = JSON.parse(localStorage.getItem('User'))[0].reddit;
  cell6.innerHTML = JSON.parse(localStorage.getItem('User'))[0].twitter;
  cell7.innerHTML = JSON.parse(localStorage.getItem('User'))[0].region;
}       
let tably = document.getElementById('content-table2');
tably.addEventListener('click', myFunction())



  function getDateNow() {
    localStorage.setItem("today", new Date().getTime())
}

  
function getCashy(cashy, input) {
  localStorage.setItem("cashy", input)};



function setLsUs(us, input) {
  localStorage.setItem("us", inputCash.value)};
 
                    
async function handleSubmit(event) {
        event.preventDefault();
        const response = await fetch('/.netlify/functions/checkout', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        }).then((res) => res.json());
        const { error } = await stripe.redirectToCheckout({
          sessionId: response.sessionId,
        });

        if (error) {
          console.error(error);
        }
      }

      function addUss(){
        let val = document.getElementById('inputCash').value;
        localStorage.setItem("sendcashto", val)
      }
const asyncbut = document.getElementById("1-button");

      asyncbut.addEventListener('click', async () => {
 
 await patchuss();
});

        async function patchuss() {
  const url = '/api/addusapi';
      const result4 = fetch(`${url}`, { method: 'get' })
  .then(response => response.json()) 
  .then(res => {  
    const SUPABASE_UPDATE_CASH = res + localStorage.sendcashto;
   return fetch(SUPABASE_UPDATE_CASH);
}).then(response => response.json()).then(res => {
  
  let summed =  res[0].cash + Number(localStorage.cashy/100);
let oldData = {
        cash: summed,
    };
fetch(`${url}`, { method: 'get' })
  .then(response => response.json()) 
  .then(res => {  
    const SUPABASE_UPDATE_CASH = res + localStorage.sendcashto;

      let xhr = new XMLHttpRequest();
        xhr.open("PATCH", SUPABASE_UPDATE_CASH);
        xhr.setRequestHeader("Accept", "application/json");
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.send(JSON. stringify(oldData));
})
})

}

  
                  </script>

    
  </div>
</body>
</html>
